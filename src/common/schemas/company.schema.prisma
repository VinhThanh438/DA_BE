enum PrsOrganizationType {
  headquarter
  company
  department
  branch
}

model Organizations {
  id             Int     @id @default(autoincrement())
  code           String? @default(cuid())
  name           String
  responsibility String?
  industry       String?
  logo           String?
  files          Json?   @default("[]")
  establishment  String?

  type      PrsOrganizationType @default(company)
  parent_id Int?
  leader_id Int?

  is_deleted Boolean @default(false)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  leader           Employees?      @relation(fields: [leader_id], references: [id])
  parent           Organizations?  @relation("OrganizationHierarchy", fields: [parent_id], references: [id])
  sub_organization Organizations[] @relation("OrganizationHierarchy")

  job_position           JobPositions[]
  partners               Partners[]
  quotations             Quotations[]
  orders                 Orders[]
  invoices               Invoices[]
  inventories            Inventories[]
  productions            Productions[]
  material_budgets       MaterialBudgets[]
  finance_records        FinanceRecords[]
  transaction_orders     TransactionOrders[]
  transaction_warehouses TransactionWarehouses[]
  quotation_requests       QuotationRequests[]
  order_expenses         OrderExpenses[]

  @@map("organizations")
  contracts Contracts[]
  purchase_requests PurchaseRequests[]
}

model Positions {
  id          Int     @id @default(autoincrement())
  name        String
  level       String?
  description String?

  job_positions JobPositions[]

  @@map("positions")
}

model JobPositions {
  id              Int     @id @default(autoincrement())
  organization_id Int?
  position_id     Int?
  level           String?
  name            String
  description     String?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  organization Organizations? @relation(fields: [organization_id], references: [id])
  position     Positions?    @relation(fields: [position_id], references: [id], onDelete: SetNull)
  employees    Employees[]

  @@map("job_positions")
}
