enum OrganizationType {
  headquarter
  company
  department
}

model Organizations {
  id             Int     @id @default(autoincrement())
  code           String?  @default(cuid())
  name           String
  responsibility String?
  files          Json?   @default("[]")
  establishment  String?
  
  type           OrganizationType @default(company)
  parent_id      Int?
  leader_id      Int?

  is_deleted     Boolean @default(false)

  created_at            DateTime                @default(now())
  updated_at            DateTime                @updatedAt

  leader Employees?         @relation(fields: [leader_id], references: [id])
  parent Organizations?     @relation("OrganizationHierarchy", fields: [parent_id], references: [id])
  sub_organization Organizations[] @relation("OrganizationHierarchy")

  job_position          JobPositions[]
  Partners              Partners[]
  Quotations            Quotations[]
  Orders                Orders[]
  OrderContracts        OrderContracts[]
  Invoices              Invoices[]
  Inventories           Inventories[]
  InventoryDetails      InventoryDetails[]
  Productions           Productions[]
  MaterialStandards     MaterialStandards[]
  MaterialBudgets       MaterialBudgets[]
  FinanceRecords        FinanceRecords[]
  TransactionOrders     TransactionOrders[]
  TransactionWarehouses TransactionWarehouses[]

  @@map("organizations")
}

model Positions {
  id           Int            @id @default(autoincrement())
  name         String
  level        String?
  description  String?
  JobPositions JobPositions[]

  @@map("positions")
}

model JobPositions {
  id              Int     @id @default(autoincrement())
  organization_id Int
  position_id     Int?
  level           String?
  name            String
  description     String?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  organization Organizations @relation(fields: [organization_id], references: [id])
  position     Positions?    @relation(fields: [position_id], references: [id], onDelete: Cascade)

  @@map("job_positions")
}
