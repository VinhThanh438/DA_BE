// dinh muc nguyen vat lieu
model BillOfMaterialDetails {
  id       Int     @id @default(autoincrement())
  quantity Int     @default(0)

  material_id     Int?
  bom_id     Int?
  unit_id    Int?
  
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  material          Products?             @relation(fields: [material_id], references: [id], onDelete: SetNull)
  unit              Units?                @relation(fields: [unit_id], references: [id])
  bill_of_material  BillOfMaterials?      @relation(fields: [bom_id], references: [id], onDelete: SetNull)

  @@map("bom_details")
}

// dinh muc nguyen vat lieu co luong khoan
model BillOfMaterials {
  id                 Int     @id @default(autoincrement())
  salary    Decimal?
  
  product_id  Int?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  product     Products?      @relation(fields: [product_id], references: [id], onDelete: SetNull)

  @@map("bom")
  details BillOfMaterialDetails[]
}

// du tru vat tu
model MaterialBudgets {
  id                 Int     @id @default(autoincrement())
  add_for_production Int?
  add_for_order      Int?
  note               String?

  product_id      Int?
  organization_id Int?

  organization Organizations? @relation(fields: [organization_id], references: [id], onDelete: SetNull)
  product      Products?      @relation(fields: [product_id], references: [id], onDelete: SetNull)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("material_budgets")
}
