// Dung de luu tat ca cac thong tin giao dich tren he thong
enum PrsTransactionType {
  in
  out
}

enum PrsTransactionOrderType {
  commission
  order
}

model Transactions {
  id         Int                      @id @default(autoincrement())
  time_at    DateTime                 @default(now())
  type       PrsTransactionType?
  order_type PrsTransactionOrderType? @default(order)
  amount     Decimal?
  note       String?

  partner_id        Int? // Doi tac
  employee_id       Int? // nhan vien giao dich
  organization_id   Int?
  order_id          Int? // Don hang
  invoice_id          Int? // Hoa don
  bank_id           Int? // Tai khoan giao dich
  representative_id Int? // Nguoi dai dien
  payment_id        Int? // Nguoi dai dien

  is_closed  Boolean? @default(false)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  partner        Partners?        @relation(fields: [partner_id], references: [id], onDelete: SetNull)
  employee       Employees?       @relation(fields: [employee_id], references: [id], onDelete: SetNull)
  organization   Organizations?   @relation(fields: [organization_id], references: [id], onDelete: SetNull)
  bank           Banks?           @relation(fields: [bank_id], references: [id], onDelete: SetNull)
  order          Orders?          @relation(fields: [order_id], references: [id], onDelete: SetNull)
  representative Representatives? @relation(fields: [representative_id], references: [id], onDelete: SetNull)
  payment        Payments?        @relation(fields: [payment_id], references: [id], onDelete: Cascade)
  invoice        Invoices?        @relation(fields: [invoice_id], references: [id], onDelete: SetNull)

  @@map("transactions")
}
