model Contracts {
  id Int @id @default(autoincrement())

  code           String    @unique // Số hợp đồng
  tax            String? // Mã số thuế
  sign_date      DateTime? // Ngày ký
  contract_date      DateTime? @default(now()) // Ngày hợp đồng
  contract_value Decimal? // giá trị hợp đồng
  delivery_date  DateTime? // Hạn giao hàng

  files  Json?          @default("[]")
  status ContractStatus @default(doing)

  order_id       Int? // Đơn hàng
  partner_id      Int
  employee_id     Int? // Người ký
  organization_id Int? // Đơn vị ký

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  order  Orders?   @relation(fields: [order_id], references: [id], onDelete: Cascade)
  partner  Partners?   @relation(fields: [partner_id], references: [id], onDelete: Cascade)
  employee  Employees?   @relation(fields: [employee_id], references: [id], onDelete: Cascade)
  organization  Organizations?   @relation(fields: [organization_id], references: [id], onDelete: Cascade)

  contract_details CommonDetails[]
  invoices         Invoices[]

  @@map("contracts")
}

enum ContractStatus {
  doing
  completed
  cancelled
}
