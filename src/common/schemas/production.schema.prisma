model Productions {
  id      Int      @id @default(autoincrement())
  code    String   @default(cuid())
  time_at DateTime @default(now())
  note    String?

  organization_id Int?
  order_id        Int?
  partner_id      Int? // Doi tac
  employee_id     Int? // Nhan vien ban hang

  organization Organizations? @relation(fields: [organization_id], references: [id], onDelete: Cascade)
  order        Orders?        @relation(fields: [order_id], references: [id], onDelete: Cascade)
  partner      Partners?      @relation(fields: [partner_id], references: [id], onDelete: Cascade)
  employee     Employees?     @relation(fields: [employee_id], references: [id], onDelete: Cascade)

  created_at        DateTime            @default(now())
  updated_at        DateTime            @updatedAt
  ProductionDetails ProductionDetails[]

  @@map("productions")
}

model ProductionDetails {
  id              Int      @id @default(autoincrement())
  quantity        Int      @default(0)
  completion_date DateTime @default(now())
  note            String?
  files           Json?    @default("[]")

  production_id Int?
  product_id    Int?

  production Productions? @relation(fields: [production_id], references: [id], onDelete: Cascade)
  product    Products?    @relation(fields: [product_id], references: [id], onDelete: Cascade)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("production_details")
}
