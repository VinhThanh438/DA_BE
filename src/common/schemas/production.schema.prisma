// Lenh san xuat theo don hang (Lenh san xuat tong)
model Productions {
  id      Int      @id @default(autoincrement())
  code    String   @default(cuid())
  time_at DateTime @default(now())
  files           Json?    @default("[]")

  organization_id Int?
  order_id        Int?
  partner_id      Int? // Doi tac
  employee_id     Int? // Nhan vien ban hang

  organization Organizations? @relation(fields: [organization_id], references: [id], onDelete: SetNull)
  order        Orders?        @relation(fields: [order_id], references: [id], onDelete: SetNull)
  partner      Partners?      @relation(fields: [partner_id], references: [id], onDelete: SetNull)
  employee     Employees?     @relation(fields: [employee_id], references: [id], onDelete: SetNull)

  created_at         DateTime            @default(now())
  updated_at         DateTime            @updatedAt

  @@map("productions")
  details ProductionDetails[]
  purchase_requests PurchaseRequests[]
}

model ProductionDetails {
  id              Int      @id @default(autoincrement())
  quantity        Int      @default(0)
  completion_date DateTime @default(now())
  note            String?

  production_id Int?
  product_id    Int?
  unit_id       Int?

  product    Products?    @relation(fields: [product_id], references: [id], onDelete: SetNull)
  unit    Units?    @relation(fields: [unit_id], references: [id], onDelete: SetNull)
  production Productions? @relation(fields: [production_id], references: [id], onDelete: SetNull)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("production_details")
}