enum OrderType {
  purchase // Đơn đặt mua hàng
  production // Đơn hàng sản xuất
}

model Orders {
  id         Int       @id @default(autoincrement())
  code       String    @default(cuid())
  type       OrderType @default(purchase)
  address    String?
  phone      String?
  note       String?
  order_date DateTime
  files      Json?     @default("[]")

  employee_id     Int?
  partner_id      Int?
  organization_id Int?

  partner      Partners?      @relation(fields: [partner_id], references: [id])
  employee     Employees?     @relation(fields: [employee_id], references: [id])
  organization Organizations? @relation(fields: [organization_id], references: [id])

  created_at              DateTime                @default(now())
  updated_at              DateTime                @updatedAt
  Quotation_order_datails QuotationOrderDetails[]
  Productions             Productions[]
  TransactionWarehouses   TransactionWarehouses[]

  @@map("orders")
}

model OrderContracts {
  id             Int      @id @default(autoincrement())
  code           String   @default(cuid())
  tax            String?
  contract_value Decimal? // Gia tri hop dong
  status         String?
  files          Json?    @default("[]")

  sign_date     DateTime? // Ngay ky
  delivery_date DateTime? // Ngay giao

  organization_id Int?
  partner_id      Int?
  employee_id     Int?

  organization Organizations? @relation(fields: [organization_id], references: [id])
  partner      Partners?      @relation(fields: [partner_id], references: [id])
  employee     Employees?     @relation(fields: [employee_id], references: [id])

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("order_contract_details")
}
